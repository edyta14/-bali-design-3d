<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Bali Design 3D</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&display=swap" rel="stylesheet" />
<style>
    /* ============================================================
       RESET + VARIABILI
       ============================================================ */
    *, *::before, *::after {
        margin: 0; padding: 0;
        box-sizing: border-box;
    }

    :root {
        --dark:    #0a0806;
        --ink:     #2d1f13;
        --ink-dim: #6b5a4e;
        --cream:   #f0ebe3;
        --gold:    #c9a96e;
        --gold2:   #a07d42;
    }

    html, body {
        width: 100%; height: 100%;
        overflow: hidden;
        background: var(--dark);
        font-family: 'Cormorant Garamond', serif;
        color: var(--cream);
        -webkit-font-smoothing: antialiased;
    }

    /* ============================================================
       SCENA 3D
       ============================================================ */
    #scene-container {
        position: fixed;
        inset: 0;
        z-index: 0;
    }

    /* ============================================================
       LOADING
       ============================================================ */
    #loading {
        position: fixed;
        inset: 0;
        z-index: 100;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: var(--dark);
        transition: opacity 0.8s ease;
    }
    #loading.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .loader-ring {
        width: 48px; height: 48px;
        border: 2px solid var(--ink);
        border-top-color: var(--gold);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .loader-text {
        margin-top: 24px;
        font-size: 0.65rem;
        letter-spacing: 0.35em;
        text-transform: uppercase;
        color: var(--ink-dim);
    }

    /* ============================================================
       UI OVERVIEW (scena principale)
       ============================================================ */
    #ui {
        position: fixed;
        inset: 0;
        z-index: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 52px;
        pointer-events: none;
        transition: opacity 0.5s ease;
    }

    .hero-block { max-width: 480px; }

    .hero-brand {
        font-size: 0.6rem;
        letter-spacing: 0.4em;
        text-transform: uppercase;
        color: var(--gold);
        margin-bottom: 18px;
    }

    .hero-title {
        font-weight: 300;
        font-size: clamp(2.8rem, 6vw, 4.6rem);
        line-height: 1.08;
        color: var(--cream);
    }
    .hero-title em {
        font-style: italic;
        color: var(--gold);
    }

    .hero-sub {
        margin-top: 22px;
        font-size: 0.6rem;
        letter-spacing: 0.32em;
        text-transform: uppercase;
        color: var(--ink-dim);
    }

    /* Product cards */
    #products-overlay {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
    }

    .product-card {
        width: 220px;
        padding: 28px 24px;
        background: rgba(30,20,14,0.72);
        backdrop-filter: blur(6px);
        border: 1px solid rgba(201,169,110,0.12);
        border-radius: 10px;
        cursor: pointer;
        pointer-events: auto;
        transition: border-color 0.35s ease, transform 0.3s ease;
        opacity: 0;
        animation: fadeUp 0.6s ease forwards;
    }
    @keyframes fadeUp {
        from { opacity: 0; transform: translateY(18px); }
        to   { opacity: 1; transform: translateY(0);    }
    }
    .product-card:hover {
        border-color: rgba(201,169,110,0.55);
        transform: translateY(-3px);
    }

    .card-num {
        font-size: 0.58rem;
        letter-spacing: 0.3em;
        color: var(--gold);
        margin-bottom: 10px;
    }
    .card-name {
        font-size: 1.15rem;
        font-weight: 400;
        color: var(--cream);
        margin-bottom: 8px;
    }
    .card-desc {
        font-size: 0.72rem;
        color: var(--ink-dim);
        line-height: 1.5;
        margin-bottom: 14px;
    }
    .card-link {
        font-size: 0.6rem;
        letter-spacing: 0.22em;
        text-transform: uppercase;
        color: var(--gold);
        transition: letter-spacing 0.3s ease;
    }
    .product-card:hover .card-link { letter-spacing: 0.32em; }

    /* ============================================================
       OVERLAY DETAIL (scena 2 — auto orbit)
       ============================================================ */
    #detail-overlay {
        position: fixed;
        inset: 0;
        z-index: 1;
        display: none;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.5s ease;
    }
    #detail-overlay.visible { opacity: 1; }

    /* Pulsanti torna indietro — stile condiviso */
    .back-btn-style {
        position: absolute;
        top: 44px;
        left: 52px;
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 22px;
        background: rgba(255,255,255,0.06);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255,255,255,0.18);
        border-radius: 40px;
        cursor: pointer;
        pointer-events: auto;
        transition: background 0.3s ease, border-color 0.3s ease;
        text-decoration: none;
    }
    .back-btn-style:hover {
        background: rgba(255,255,255,0.12);
        border-color: rgba(255,255,255,0.35);
    }
    .back-btn-style .back-arrow {
        font-size: 0.75rem;
        color: var(--cream);
    }
    .back-btn-style .back-label {
        font-size: 0.6rem;
        letter-spacing: 0.22em;
        text-transform: uppercase;
        color: var(--cream);
    }

    /* Pulsanti su sfondo chiaro — override colori */
    #detail-overlay .back-btn-style,
    #fulldetail-overlay .back-btn-style {
        background: rgba(45,31,19,0.07);
        border-color: rgba(45,31,19,0.22);
    }
    #detail-overlay .back-btn-style:hover,
    #fulldetail-overlay .back-btn-style:hover {
        background: rgba(45,31,19,0.14);
        border-color: rgba(45,31,19,0.40);
    }
    #detail-overlay .back-btn-style .back-arrow,
    #fulldetail-overlay .back-btn-style .back-arrow {
        color: var(--ink);
    }
    #detail-overlay .back-btn-style .back-label,
    #fulldetail-overlay .back-btn-style .back-label {
        color: var(--ink);
    }

    /* Info prodotto (detail) */
    #detail-info {
        position: absolute;
        bottom: 52px;
        left: 52px;
        max-width: 380px;
    }
    .detail-num {
        font-size: 0.58rem;
        letter-spacing: 0.3em;
        color: var(--gold);
        margin-bottom: 6px;
    }
    .detail-name {
        font-size: 2rem;
        font-weight: 300;
        color: var(--ink);
        margin-bottom: 8px;
    }
    .detail-desc {
        font-size: 0.75rem;
        color: var(--ink-dim);
        line-height: 1.55;
    }
    .detail-material {
        margin-top: 14px;
        font-size: 0.56rem;
        letter-spacing: 0.3em;
        text-transform: uppercase;
        color: var(--gold2);
    }

    /* Pulsante "View in detail" */
    #fulldetail-btn {
        display: inline-block;
        margin-top: 26px;
        padding: 12px 28px;
        background: transparent;
        border: 1px solid var(--gold2);
        border-radius: 6px;
        color: var(--gold);
        font-family: 'Cormorant Garamond', serif;
        font-size: 0.62rem;
        letter-spacing: 0.28em;
        text-transform: uppercase;
        cursor: pointer;
        pointer-events: auto;
        transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }
    #fulldetail-btn:hover {
        background: var(--gold);
        border-color: var(--gold);
        color: var(--dark);
    }

    /* ============================================================
       OVERLAY FULL DETAIL (scena 3 — rotazione manuale)
       ============================================================ */
    #fulldetail-overlay {
        position: fixed;
        inset: 0;
        z-index: 1;
        display: none;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.5s ease;
    }
    #fulldetail-overlay.visible { opacity: 1; }

    #drag-hint {
        position: absolute;
        bottom: 44px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 0.58rem;
        letter-spacing: 0.32em;
        text-transform: uppercase;
        color: var(--ink-dim);
        pointer-events: none;
        opacity: 0.7;
        animation: hintPulse 2.5s ease infinite;
    }
    @keyframes hintPulse {
        0%, 100% { opacity: 0.45; }
        50%      { opacity: 0.85; }
    }

    /* ============================================================
       CONTACT TAB
       ============================================================ */
    #contact-wrapper {
        position: fixed;
        bottom: 36px;
        right: 36px;
        z-index: 10;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 10px;
    }

    #contact-panel {
        width: 230px;
        padding: 20px 22px;
        background: rgba(18,13,9,0.9);
        backdrop-filter: blur(14px);
        -webkit-backdrop-filter: blur(14px);
        border: 1px solid rgba(201,169,110,0.18);
        border-radius: 12px;
        opacity: 0;
        transform: translateY(6px);
        pointer-events: none;
        transition: opacity 0.3s ease, transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    #contact-panel.open {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
    }

    .contact-header {
        font-size: 0.52rem;
        letter-spacing: 0.38em;
        text-transform: uppercase;
        color: var(--gold);
        margin-bottom: 14px;
        padding-bottom: 11px;
        border-bottom: 1px solid rgba(201,169,110,0.14);
    }

    .contact-row {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        margin-bottom: 9px;
    }
    .contact-row:last-child {
        margin-bottom: 0;
    }

    .contact-label {
        font-size: 0.52rem;
        letter-spacing: 0.26em;
        text-transform: uppercase;
        color: var(--ink-dim);
    }
    .contact-value {
        font-size: 0.76rem;
        color: var(--cream);
        font-weight: 300;
    }
    .contact-value a {
        color: var(--gold);
        text-decoration: none;
        transition: color 0.3s ease;
    }
    .contact-value a:hover {
        color: var(--cream);
    }
    .contact-address {
        font-size: 0.68rem;
        line-height: 1.45;
        text-align: right;
        max-width: 140px;
    }

    /* Trigger pill */
    #contact-trigger {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 18px;
        background: rgba(18,13,9,0.82);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(201,169,110,0.22);
        border-radius: 40px;
        cursor: pointer;
        font-family: 'Cormorant Garamond', serif;
        transition: background 0.3s ease, border-color 0.3s ease;
    }
    #contact-trigger:hover {
        background: rgba(18,13,9,0.92);
        border-color: rgba(201,169,110,0.42);
    }

    .contact-trigger-icon {
        font-size: 0.68rem;
        color: var(--gold);
        line-height: 1;
    }
    .contact-trigger-label {
        font-size: 0.56rem;
        letter-spacing: 0.22em;
        text-transform: uppercase;
        color: var(--cream);
    }
    .contact-trigger-chevron {
        font-size: 0.68rem;
        color: var(--ink-dim);
        display: inline-block;
        transition: transform 0.3s ease;
        line-height: 1;
    }
    #contact-panel.open ~ #contact-trigger .contact-trigger-chevron {
        transform: rotate(180deg);
    }

    /* ============================================================
       RESPONSIVE
       ============================================================ */
    @media (max-width: 600px) {
        #ui { padding: 32px 24px; }
        .product-card { width: calc(50% - 10px); padding: 18px 16px; }
        #detail-info { left: 24px; bottom: 32px; }
        .back-btn-style { top: 24px; left: 24px; }
        #contact-wrapper { bottom: 24px; right: 24px; }
        #contact-panel { width: 200px; }
    }
</style>
</head>
<body>

<!-- Scena Three.js -->
<div id="scene-container"></div>

<!-- Loading -->
<div id="loading">
    <div class="loader-ring"></div>
    <p class="loader-text">Loading</p>
</div>

<!-- UI Overview -->
<div id="ui">
    <div class="hero-block">
        <p class="hero-brand">Bali Design</p>
        <h1 class="hero-title">
            Affordable<br><em>Luxurious</em><br>Living
        </h1>
        <p class="hero-sub">Dubai · Bohemian Interiors · Handcrafted</p>
    </div>
    <div id="products-overlay"></div>
</div>

<!-- Overlay Detail (scena 2) -->
<div id="detail-overlay">
    <button id="back-btn" class="back-btn-style">
        <span class="back-arrow">←</span>
        <span class="back-label">Back to collection</span>
    </button>
    <div id="detail-info">
        <p class="detail-num" id="detail-num"></p>
        <h2 class="detail-name" id="detail-name"></h2>
        <p class="detail-desc" id="detail-desc"></p>
        <p class="detail-material" id="detail-material"></p>
        <button id="fulldetail-btn">View in detail →</button>
    </div>
</div>

<!-- Overlay Full Detail (scena 3 — rotazione manuale) -->
<div id="fulldetail-overlay">
    <button id="back-detail-btn" class="back-btn-style">
        <span class="back-arrow">←</span>
        <span class="back-label">Back to detail</span>
    </button>
    <p id="drag-hint">Drag to rotate</p>
</div>

<!-- Contact Tab -->
<div id="contact-wrapper">
    <div id="contact-panel">
        <p class="contact-header">Contact</p>
        <p class="contact-row">
            <span class="contact-label">Email</span>
            <span class="contact-value"><a href="mailto:info@balidesign.me">info@balidesign.me</a></span>
        </p>
        <p class="contact-row">
            <span class="contact-label">Phone</span>
            <span class="contact-value"><a href="tel:+971569332244">+971 56 933 2244</a></span>
        </p>
        <p class="contact-row">
            <span class="contact-label">Address</span>
            <span class="contact-value contact-address">22nd Street<br>Al Quoz 3, Dubai</span>
        </p>
    </div>
    <button id="contact-trigger">
        <span class="contact-trigger-icon">✉</span>
        <span class="contact-trigger-label">Contact</span>
        <span class="contact-trigger-chevron">›</span>
    </button>
</div>

<script type="module" src="./src/main.js"></script>

<!-- Contact tab toggle -->
<script>
    document.getElementById('contact-trigger').addEventListener('click', function () {
        document.getElementById('contact-panel').classList.toggle('open');
    });
</script>
</body>
</html>